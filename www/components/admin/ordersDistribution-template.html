<md-content flex md-scroll-y class="background-color-transparent" dir="rtl">
    <main flex>
        <ui-view layout="column" layout-fill>

            <filter-table card-title="'סינון ופעולות'" 
                          on-filter-callback="vm.getOrders" 
                          show-download-excel-btn="vm.ordersItems.length > 0"
                          initial-values="vm.initialFilter"></filter-table>
                                                    
            <md-card layout-margin>
                <md-table-container>
                    <table md-table md-row-select multiple ng-model="selected" md-progress="vm.promise">
                        <thead md-head md-order="vm.query.order" md-order="vm.query.order" md-on-reorder="vm.getOrders">
                            <tr md-row>
                                <th md-column md-order-by="order.branchId">סניף</th>
                                <th md-column md-order-by="order.orderId">מספר הזמנה</th>
                                <th md-column md-order-by="item.itemSerialNumber">קוד פריט</th>
                                <th md-column md-order-by="item.itemName">שם פריט</th>
                                <th md-column>כמות מוזמנת</th>
                                <th md-column>ביקורת</th>
                                <th md-column>מילועוף</th>
                                <th md-column>עוף עוז</th>
                                <th md-column>עוף טוב</th>
                                <th md-column>+</th>
                            </tr>
                        </thead>
                        <tbody md-body>
                            <tr class="distribution-table" md-row md-select="item" md-select-id="name" md-auto-select ng-repeat="o in vm.ordersItems | orderBy: vm.query.order">
                                <td md-cell >{{::o.order.branchId}}</td>
                                <td md-cell >{{::o.order.orderId}}</td>
                                <td md-cell >{{::o.item.itemSerialNumber}}</td>
                                <td md-cell >{{::o.item.itemName}}</td>
                                <td md-cell >{{::o.item.count}}</td>
                                <td md-cell ng-class="{'text-green' : o.sum === o.item.count}">{{o.sum}}</td>
                                <td md-cell> 
                                    <md-input-container style="margin: 0">
                                        <input aria-label="input" style="width: 40px;" type="number" name="name{{$index}}" 
                                               ng-model="o.s1count" min="0" max="{{o.item.count - o.sum + o.s1count}}"
                                               ng-change="vm.updateSum(o.s1count, o)">
                                    </md-input-container> 
                                </td>
                                 <td md-cell> 
                                    <md-input-container style="margin: 0">
                                        <input aria-label="input" style="width: 40px;" type="number" name="name{{$index}}" 
                                               ng-model="o.s2count" min="0" max="{{o.item.count - o.sum + o.s2count}}"
                                               ng-change="vm.updateSum(o.s2count, o)">
                                    </md-input-container> 
                                </td>
                                 <td md-cell> 
                                    <md-input-container style="margin: 0">
                                        <input aria-label="input" style="width: 40px;" type="number" name="name{{$index}}" 
                                               ng-model="o.s3count" min="0" max="{{o.item.count - o.sum + o.s3count}}"
                                               ng-change="vm.updateSum(o.s3count, o)">
                                    </md-input-container> 
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </md-table-container>
                <!--</md-card>
                    <md-card>-->
                <!--<md-table-pagination md-label="{'of': ' מתוך ', 'page': 'עמוד מספר', 'rowsPerPage': 'מספר שורות בעמוד' }" md-limit="vm.query.limit"
                    md-limit-options="[5, 10, 15, 20]" md-page="vm.query.page" md-total="{{vm.totalOrderCount}}" md-on-paginate="vm.getOrders"
                    md-page-select></md-table-pagination>-->
            </md-card>

        </ui-view>
    </main>
</md-content>